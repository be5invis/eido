:def{pageMeta}{\newHash}
:setPart{\pageMeta}{id}{\.}
:setPart{\pageMeta}{itselfUrl}{\.}
:setPart{\pageMeta}{info}{\.}
:setPart{\pageMeta}{summary}{\.}

:defun{appendPageInfo}{info}
	::voidize
	\setPart{\pageMeta}{info}{\part{\pageMeta}{info}\info\"{{ }}Â·\"{{ }}}




:def{sectionLevelMeta}{\newHash}
:setPart{\sectionLevelMeta}{makeIndex}{\false}
:setPart{\sectionLevelMeta}{level}{\num{1}}

:def{pageIndex}{\newHash}
:setPart{\pageIndex}{index}{\a{href="#headarea" class="top"}{\span{Top}}}
:setPart{\pageIndex}{titleId}{\num{0}}

:defun{h}{q}{s}
	:voidize
		:if{\not{\s}}{\def{s}{\q}\def{q}{\.}}{\.}
		:if{\part{\sectionLevelMeta}{makeIndex}}
			:setPart{\pageIndex}{titleId}{\+{\part{\pageIndex}{titleId}}{\num{1}}}
			:setPart{\pageIndex}{index}
				:part{\pageIndex}{index}
				:a{href="\part{\pageMeta}{itselfUrl}#section-\part{\pageMeta}{id}-\part{\pageIndex}{titleId}" class="level-\part{\sectionLevelMeta}{level}"}{\span{\s}}
	:<{h\part{\sectionLevelMeta}{level}}{\q\if{\part{\sectionLevelMeta}{makeIndex}}{ id="section-\part{\pageMeta}{id}-\part{\pageIndex}{titleId}"}{\.}}{\s}

:defun{_section}{sectionBody}
	:voidize
		:setPart{\sectionLevelMeta}{level}{\+{\part{\sectionLevelMeta}{level}}{\num{1}}}
	:sectionBody
	:voidize
		:setPart{\sectionLevelMeta}{level}{\-{\part{\sectionLevelMeta}{level}}{\num{1}}}

:defun_{section}{q}{s}
	:if{\not{\get{s}}}{\_section{\get{q}}}
		:_section
			::lambda
			:h{\q}
			:s
