var scope = exports.scope = {};
var hljs = require('hljs');

scope.source = function(language, text){
	var r = this['<']('pre', 'class="mghl source ' + language + '"', hljs(this.detab(text.trimRight()), language).value);
	return r;
}
scope.useLanguage = function(language, alias){
	this[language] = this['source-' + language] = function(s){return this.source(language, s)}
	if(alias){this[alias] = this['source-' + alias] = this[language]};
	return '';
}

exports.apply = function(){
	this.usePackage('ove/html');
	this.__merge(scope);
	require('./source.ed').apply.call(this);
}